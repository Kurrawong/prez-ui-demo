import{_ as M}from"./nuxt-link.bc61b319.js";import{j as w,q as _,o as s,h as l,w as u,d as p,x as E,g as n,y as I,b as z,c as a,t as f,z as t,a as d,F as N,n as V,A as P,s as U,r as F,k as W,f as G,B as J}from"./entry.c4fe7854.js";import{_ as D}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as K,a as Q}from"./Loading.vue.501f43fd.js";import{a as q}from"./str.08505d9c.js";import{u as X}from"./rdf.7f77f2a6.js";const Y=w({__name:"prez:members",props:{info:{},form:{}},setup(y){return(o,i)=>{const v=_("v-btn");return s(),l(v,{to:o.info[0].fields["prez:link"]},{default:u(()=>[p("View Members")]),_:1},8,["to"])}}});const Z=D(Y,[["__scopeId","data-v-c0694020"]]),T={"prez:members":Z},x=w({__name:"index",props:{fieldName:{},form:{},info:{}},setup(y){return(o,i)=>(s(),l(E(n(T)[o.fieldName]),{info:o.info,form:o.form},null,8,["info","form"]))}}),ee={key:0,class:"form",style:{position:"relative"}},oe={key:0,class:"text-h3 mb-5 mt-2"},re={key:0},se={colspan:"2"},te={style:{"white-space":"nowrap"}},ne=["href","title"],le={key:0},ae=["title"],ie={key:1},me=w({__name:"Form",props:{form:{},formTitle:{},headerTitle:{},nestLevel:{},excludeFields:{},fields:{},info:{type:Boolean},links:{}},setup(y){const o=y,i=o.excludeFields?o.excludeFields:[/^prez:./],v=(o.fields?o.fields:Object.keys(o.form.formHeaders)).filter(e=>{if(!(e in o.form.formHeaders)||!(e in o.form.fields))return console.warn(`${e} not found in form
(${Object.keys(o.form.formHeaders)})`),!1;if(e in T)return i.indexOf(e)>=0?!!(o.fields&&o.fields.indexOf(e)>=0):!0;for(const k in i)if(e.match(i[k]))return!1;return!0}),h=e=>Array.isArray(o.form.fields[e])&&typeof o.form.fields[e][0]=="object",C=e=>Array.isArray(o.form.fields[e])&&typeof o.form.fields[e][0]=="string";return I(),(e,k)=>{const c=_("v-chip"),b=_("v-icon"),g=M,L=O,$=x,m=_("v-table"),B=_("v-col"),j=K,A=_("v-row");return s(),l(A,null,{default:u(()=>[z(B,{cols:o.nestLevel?12:10},{default:u(()=>[e.form&&e.form.count>0?(s(),a("div",ee,[e.headerTitle&&e.form?(s(),a("div",oe,f(n(q)(e.headerTitle,e.form)),1)):t("",!0),e.form.fields["rdf:type"]?(s(),l(c,{key:1,variant:"flat",style:{position:"absolute",right:"0",top:"0"}},{default:u(()=>[p(f(e.form.fields["rdf:type"]),1)]),_:1})):t("",!0),e.form?(s(),l(m,{key:2,theme:"dark"},{default:u(()=>[e.formTitle?(s(),a("thead",re,[d("tr",null,[d("th",se,f(n(q)(e.formTitle,e.form)),1)])])):t("",!0),d("tbody",null,[(s(!0),a(N,null,V(n(v),r=>{var S,H;return s(),a("tr",null,[d("th",te,[p(f(e.form.formHeaders[r].label)+" Â ",1),d("a",{href:e.form.formHeaders[r].iri,title:r},[z(b,{icon:"mdi-link"})],8,ne),e.info?(s(),a("div",le,f(r),1)):t("",!0)]),r in n(T)?(s(),a("td",ie,[r in n(T)?(s(),l($,{key:0,form:e.form,info:e.form.fields[r],"field-name":r},null,8,["form","info","field-name"])):t("",!0)])):(s(),a("td",{key:0,class:P(h(r)?"td-nest":void 0)},[(H=(S=e.form.fields._meta)==null?void 0:S[r])!=null&&H.type?(s(),l(c,{key:0,size:"x-small"},{default:u(()=>[p(f(e.form.fields._meta[r].type),1)]),_:2},1024)):t("",!0),d("div",{title:r in e.form.fields._meta&&e.form.fields[r]!=e.form.fields._meta[r].value?e.form.fields._meta[r].value:null},[r=="prez:link"?(s(),l(g,{key:0,to:e.form.fields[r]},{default:u(()=>[p(f(e.form.fields[r]),1)]),_:2},1032,["to"])):t("",!0),p(" "+f(typeof e.form.fields[r]!="object"&&r!="prez:link"?e.form.fields[r]:"")+" "+f(C(r)?e.form.fields[r].join(", "):"")+" ",1),h(r)?(s(!0),a(N,{key:1},V(e.form.fields[r],R=>(s(),l(L,{form:R,"exclude-fields":n(i),"nest-level":o.nestLevel?o.nestLevel+1:1},null,8,["form","exclude-fields","nest-level"]))),256)):t("",!0)],8,ae)],2))])}),256))])]),_:1})):t("",!0)])):t("",!0)]),_:1},8,["cols"]),o.nestLevel?t("",!0):(s(),l(B,{key:0,class:"mt-16",cols:"2"},{default:u(()=>[z(j,{links:e.links},null,8,["links"])]),_:1}))]),_:1})}}});const O=D(me,[["__scopeId","data-v-3c0b8673"]]),ye=w({__name:"Form",props:{dataUrl:{},formTitle:{},excludeFields:{},headerTitle:{},fields:{},info:{type:Boolean}},setup(y){const o=y,i=X(),{loading:v,success:h,error:C,prez:e}=U(i),k=F(1),c=F(void 0),b=F(null);W(async()=>{await $()});const g=G(),L=F(g.query);J(()=>L.value=g.query,()=>{});async function $(){if(await i.load(o.dataUrl,{params:{page:k.value}}),h.value)try{b.value=null,c.value=e.value.form(["skos:prefLabel","dcterms:title","rdfs:label","schema:name"],["skos:definition","dcterms:description","schema:description"])}catch(m){b.value=m.message}}return(m,B)=>{const j=O,A=Q;return s(),a(N,null,[n(c)?(s(),l(j,{key:0,"header-title":m.headerTitle,"form-title":m.formTitle,form:n(c),fields:m.fields,"exclude-fields":m.excludeFields,info:m.info,links:n(e).headerLinks},null,8,["header-title","form-title","form","fields","exclude-fields","info","links"])):t("",!0),z(A,{loading:n(v),error:n(C)},null,8,["loading","error"])],64)}}});export{ye as _};
