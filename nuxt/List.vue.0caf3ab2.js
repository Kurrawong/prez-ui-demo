import{j as L,f as V,y as B,r as F,C as H,q as i,o as s,h as b,w as d,b as u,a as v,D as R,g as r,m as j,c as l,t as k,z as h,d as w,F as x,n as $,s as D,k as N}from"./entry.c4fe7854.js";import{_ as E,a as U}from"./Loading.vue.501f43fd.js";import{a as M}from"./str.08505d9c.js";import{_ as O}from"./_plugin-vue_export-helper.c27b6911.js";import{u as P}from"./rdf.7f77f2a6.js";const W=v("h2",{class:"mb-5"},"Search collection",-1),I=["onSubmit"],A=L({__name:"SearchWidget",setup(C){const o=V(),_=B(),a=F(o.query.q);function e(){_.push({query:{...o.query,q:a.value}})}return H(()=>"q"in o.query&&o.query.q!==""?o.fullPath:null),(g,p)=>{const m=i("v-text-field"),q=i("v-card-text"),f=i("v-card");return s(),b(f,{class:"mx-auto","max-width":"800",flat:""},{default:d(()=>[u(q,null,{default:d(()=>[W,v("form",{class:"d-flex justify-end mt-5",method:"get",onSubmit:R(e,["stop","prevent"])},[u(m,{density:"compact",variant:"solo",label:"Enter text to lookup","append-inner-icon":"mdi-magnify","single-line":"","hide-details":"",autofocus:!0,name:"q",modelValue:r(a),"onUpdate:modelValue":p[0]||(p[0]=y=>j(a)?a.value=y:null)},null,8,["modelValue"])],40,I)]),_:1})]),_:1})}}}),G={style:{position:"relative"}},J={key:0,class:"text-h3 mb-5 mt-2"},K={style:{"white-space":"nowrap"}},Q=["href","title"],X={key:1},Y=["onClick"],Z=["title"],ee=L({__name:"List",props:{list:{},headerTitle:{},excludeFields:{},fields:{},info:{type:Boolean},links:{}},setup(C){const o=C,_=o.excludeFields?o.excludeFields:[/^prez:./],a=(o.fields?o.fields:Object.keys(o.list.listHeaders)).filter(e=>{for(const g in _)if(e.match(_[g]))return!!(o.fields&&o.fields.indexOf(e)>=0);return!0});return B(),(e,g)=>{const p=i("v-chip"),m=i("v-icon"),q=i("v-btn"),f=i("v-table"),y=i("v-col"),c=A,z=E,S=i("v-row");return s(),b(S,null,{default:d(()=>[u(y,{cols:"10"},{default:d(()=>[v("div",G,[e.headerTitle&&e.list?(s(),l("div",J,k(r(M)(e.headerTitle,e.list)),1)):h("",!0),u(p,{variant:"flat",style:{position:"absolute",right:"0",top:"0"}},{default:d(()=>[w(k(e.list.header.label),1)]),_:1}),e.list?(s(),b(f,{key:1,theme:"dark"},{default:d(()=>[v("thead",null,[v("tr",null,[(s(!0),l(x,null,$(r(a),t=>(s(),l("th",K,[w(k(t in e.list.listHeaders?e.list.listHeaders[t].label:`${t} missing`)+" Â ",1),t in e.list.listHeaders?(s(),l("a",{key:0,href:e.list.listHeaders[t].iri,title:t},[u(m,{icon:"mdi-link"})],8,Q)):h("",!0),e.info?(s(),l("div",X,k(t),1)):h("",!0)]))),256))])]),v("tbody",null,[(s(!0),l(x,null,$(e.list.list,t=>(s(),l("tr",{onClick:n=>typeof t["prez:link"]=="string"?e.$router.push(t["prez:link"]):null},[(s(!0),l(x,null,$(r(a),n=>(s(),l("td",null,[v("div",{title:n in t?t[n]:null,class:"td-max"},[n=="prez:link"?(s(!0),l(x,{key:0},$(typeof t[n]=="object"?t[n]:[t[n]],T=>(s(),b(q,{class:"mr-4 mb-1",to:T},{default:d(()=>[w(k(T),1)]),_:2},1032,["to"]))),256)):h("",!0),w(" "+k(n!="prez:link"?n in t?t[n]:`"${n}" not found`:""),1)],8,Z)]))),256))],8,Y))),256))])]),_:1})):h("",!0)])]),_:1}),u(y,{class:"mt-16",cols:"2"},{default:d(()=>[u(c),e.links?(s(),b(z,{key:0,links:e.links},null,8,["links"])):h("",!0)]),_:1})]),_:1})}}});const te=O(ee,[["__scopeId","data-v-b4055d28"]]),ae=L({__name:"List",props:{dataUrl:{},headerTitle:{},excludeFields:{},fields:{},info:{type:Boolean}},setup(C){const o=C,_=P(),{loading:a,success:e,error:g,prez:p}=D(_),m=F(null),q=F(1),f=F(void 0);N(async()=>{await y()}),V();async function y(){if(await _.load(o.dataUrl,{params:{page:q.value}}),e.value)try{m.value=null,f.value=p.value.list(["skos:prefLabel","rdfs:label"])}catch(c){m.value=c.message}}return(c,z)=>{const S=te,t=U;return s(),l(x,null,[r(f)?(s(),b(S,{key:0,"header-title":c.headerTitle,list:r(f),fields:c.fields,"exclude-fields":c.excludeFields,info:c.info,links:r(p).headerLinks},null,8,["header-title","list","fields","exclude-fields","info","links"])):h("",!0),u(t,{loading:r(a),error:r(g)},null,8,["loading","error"]),u(t,{loading:!1,error:r(m)},null,8,["error"])],64)}}});export{ae as _};
